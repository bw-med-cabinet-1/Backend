# Backend
Medicine Cabinet

## Documentation

Base URL for deployed API: 

## **Endpoints**

| Method | URL | Description | Requires Token | Requires Admin |
|--------|-----|-------------|----------------|----------------|
| POST | /api/auth/register | register a new user | - | - |
| POST | /api/auth/login | login as existing user | - | - |
| POST | /api/strains | create a new strain | X | - |
| GET | /api/strains | gets all strains and their info | X | - |
| GET | /api/strains/:id | gets a specific strain by id | X | - |
| PUT | /api/strains/:id | edit a strain | X | X |
| DELETE | /api/strains/:id | delete a strain from database | X | X |

## **Table Requirements**

## **Users**

| Name | Type | Required | Unique | Notes |
|------|------|----------|--------|-------|
| id | integer | yes | yes | auto generated by the API |
| username | string | yes | yes | - |
| password | string | yes | no | - |
| role | boolean | no | no | 0 or 1 is the same as false and true, you can use either

Note: you must be registered and logged in to access the strains list/database

# **How-Tos**

| Name | Type | Required | Unique | Notes |
|------|------|----------|--------|-------|
| id | integer | yes | yes | auto generated by the API |
| strain_name | string | yes | no | - |
| type | string | yes | no | could be either Hybrid, Sativa or Indica |
| thc_content | string | yes | no | usually a percentage |
| cbd_content | string | no | no | - |
| best_time_for_use| string | no | no | usually either morning, afternoon or night |
| more_info | text | no | no | if you want to add more information about this strain |

## **Logins**

If i need to update the database at any point during the week all users made up until that point will be deleted. These logins will always be available to use.
| username | password |
| ----- | -------- |
| user | password |
| admin | password |

## **Requests and Returns**

### POST /api/auth/register
Request body:
```
{
    "username":"bea",
    "password":"password",
    "role": 0
}
```
Returns:
```
{
    "message": "user successfulled registered",
    "data": {
        "id": 4,
        "username": "bea",
        "password": "$2a$08$9BPGvk/6XQMRjKxed.B3tOIZsiLLkAdbBNbMAC8M61.EebIV.RQF2",
        "role": 0
    },
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImJlYSIsInJvbGUiOjAsInN1YmplY3QiOjQsImlhdCI6MTYwMDY2MDA5MSwiZXhwIjoxNjAwNjg4ODkxfQ.2M72kjDnqbXDwpKjfhdo3726zTQemDXht2SCL_l6RcM"
}
```

### POST /api/auth/login
Request body:
```
{
    "username":"user",
    "password":"password"
}
```
Returns:
```
{
    "message": "Welcome!",
    "user": {
        "id": 2,
        "username": "user",
        "password": "$2a$04$Ks3ueUHeiMI8Gi3N6uIvpuQddV9J9MGzLL0gtbU1Vwkbcy5z30UZS",
        "role": 0
    },
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InVzZXIiLCJyb2xlIjowLCJzdWJqZWN0IjoyLCJpYXQiOjE2MDA2OTI3NzEsImV4cCI6MTYwMDcyMTU3MX0.t33fLygVQ8Qo1SvmrcxVe77HXfxfw3fosNKLn9rVy0Y"
}
```

### POST /api/strains
Request body:
```
{
    "strain_name": "testing123 ",
    "type": "Choose one: Hybrid, Sativa or Indica required",
    "thc_content": "1% required",
    "cbd_content": "1%",
    "best_time_for_use": "Choose one: Morning, Afternoon, Night required",
    "more_info": ""
}
```
Returns:
```
{"message": "strain successfully created",
    "rez": {
        "id": 11,
        "strain_name": "testing123 ",
        "type": "Choose one: Hybrid, Sativa or Indica required",
        "thc_content": "1% required",
        "cbd_content": "1%",
        "best_time_for_use": "Choose one: Morning, Afternoon, Night required",
        "more_info": ""
    }
}
```

### GET /api/strains/
Returns:
```
{
    "strains": [
        {
            "id": 1,
            "strain_name": "$100 OG Kush",
            "type": "Hybrid",
            "thc_content": "25%",
            "cbd_content": "",
            "best_time_for_use": "Night",
            "more_info": "Users can treat medical conditions such as anxiety and insomnia, the relaxing euphoria easing their mind and either alleviating their anxiety or helping lull them into a relaxed sleep. Those suffering chronic pain can also find relief when using $100 OG Kush. The strain is also used to treat muscle spasms and tremors. For those who need a boost in appetite, $100 OG Kush is a great choice as it tends to stimulate the appetite effectively, and may also be used to alleviate Gastrointestinal Disorder. Others may use it to treat symptoms of Bipolar Disorder, Attention Deficit Disorder and Attention Deficit Hyperactivity Disorder."
        },
        {
            "id": 2,
            "strain_name": "3D CBD",
            "type": "Sativa",
            "thc_content": "8%",
            "cbd_content": "18%",
            "best_time_for_use": "Morning",
            "more_info": "Common usage for insomina, migranes and arthritis."
        },
        {
            "id": 3,
            "strain_name": "Fruity Pebbles",
            "type": "Indica",
            "thc_content": "23%",
            "cbd_content": "19%",
            "best_time_for_use": "Afternoon",
            "more_info": "Most cannabis strains sold under the label Fruity Pebbles provides a hybrid-type high that takes hold quickly, with a soft but strong body buzz that can provide relaxation and some psychedelic effects. In general, these strains may be effective medication for pain, mood disorders, migraines, and attention deficit disorders."
        },
        {
            "id": 4,
            "strain_name": "A-Train",
            "type": "Hybrid",
            "thc_content": "20%",
            "cbd_content": "",
            "best_time_for_use": "Night",
            "more_info": "Common usage for depression, loss of apetite and anxiety."
        },
        {
            "id": 5,
            "strain_name": "Zelly's Gift",
            "type": "Sativa",
            "thc_content": "18%",
            "cbd_content": "",
            "best_time_for_use": "Morning",
            "more_info": "Depending on how you look at it, Zelly’s Gift could be offering up a variety of presents to your life including great flavors, happiness, creativity, or relief from mental woes. We don’t want to say she’s perfect, but she nearly is. Enjoy this strain before you head into the office for the day or share some with friends before you head out for a fun weekend adventure."
        },
        {
            "id": 6,
            "strain_name": "Mango Sapphire",
            "type": "Indica",
            "thc_content": "23%",
            "cbd_content": "1%",
            "best_time_for_use": "Afternoon",
            "more_info": "Common usage for depression, loss of apetite and anxiety."
        },
        {
            "id": 7,
            "strain_name": "Girl Scout Cookies",
            "type": "Indica",
            "thc_content": "28%",
            "cbd_content": "1%",
            "best_time_for_use": "Night",
            "more_info": "First and foremost, this is a great strain for treating chronic pain, inflammation, muscle tension, and cramps. Its highly sedative properties will have you feeling relief in no time. Additionally, many use this strain as a stress reliever. The tranquilizer-like feeling of this bud puts you in a place of complete relaxation, slaying stress and even getting you ready for a good night’s sleep."
        },
        {
            "id": 8,
            "strain_name": "Nurse Jackie",
            "type": "Sativa",
            "thc_content": "24%",
            "cbd_content": "",
            "best_time_for_use": "Morning",
            "more_info": "Common usage for depression, pain and nausea."
        },
        {
            "id": 9,
            "strain_name": "Blue Dream",
            "type": "Hybrid",
            "thc_content": "27%",
            "cbd_content": "2%",
            "best_time_for_use": "Afternoon",
            "more_info": "Users who suffer from anxiety disorders are not recommended to use this strain as it has a tendency to get ahead of you quickly and could definitely agitate pre-existing conditions."
        },
        {
            "id": 10,
            "strain_name": "X Wing",
            "type": "Indica",
            "thc_content": "26%",
            "cbd_content": "",
            "best_time_for_use": "Night",
            "more_info": "With an astronomically high average of 26% THC, this is a strong, albeit happy, high that will have you floating around a field of creativity after just one hit."
        }
    ]
}
```

### GET /api/strains/:id
Returns:
```
{
    "id": 1,
    "strain_name": "$100 OG Kush",
    "type": "Hybrid",
    "thc_content": "25%",
    "cbd_content": "",
    "best_time_for_use": "Night",
    "more_info": "Users can treat medical conditions such as anxiety and insomnia, the relaxing euphoria easing their mind and either alleviating their anxiety or helping lull them into a relaxed sleep. Those suffering chronic pain can also find relief when using $100 OG Kush. The strain is also used to treat muscle spasms and tremors. For those who need a boost in appetite, $100 OG Kush is a great choice as it tends to stimulate the appetite effectively, and may also be used to alleviate Gastrointestinal Disorder. Others may use it to treat symptoms of Bipolar Disorder, Attention Deficit Disorder and Attention Deficit Hyperactivity Disorder."
}
```

### PUT /api/strains/:id
Request body:
```
{
    "id": 1,
    "strain_name": "$100 OG Kush",
    "type": "Hybrid",
    "thc_content": "25%",
    "cbd_content": "",
    "best_time_for_use": "Night",
    "more_info": "test update this"
}
```
Returns:
```
{
    "message": "strain successfully updated",
    "rez": {
        "id": 1,
        "strain_name": "$100 OG Kush",
        "type": "Hybrid",
        "thc_content": "25%",
        "cbd_content": "",
        "best_time_for_use": "Night",
        "more_info": "test update this"
    }
}
```

### DELETE /api/strains/:id
Returns:
```
{
    "message": "this strain was successfully deleted",
    "rez": {
        "id": 12,
        "strain_name": "Wedding Cake",
        "type": "Indica",
        "thc_content": "25%",
        "cbd_content": "",
        "best_time_for_use": "Night",
        "more_info": "Its tendency to bring about feelings of perceptiveness can aid those with mild to moderate stress, anxiety, and depression, helping them feel more “in the moment.” Because this strain leaves users lucid and levelheaded, it can also help those with attention deficit disorders to focus on specific tasks. Wedding Cake’s gradual waves of physical relaxation can soothe both temporary and chronic aches and pains and, in high enough doses, can bring about relief for insomnia. Finally, it can be a potent appetite stimulant for those who have lost their hunger to disease, medication, or chemotherapy."
    }
}
```