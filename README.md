# Backend
Medicine Cabinet

## Documentation

Base URL for deployed API: https://bw-medicine-cabinet.herokuapp.com/

## **Endpoints**

| Method | URL | Description | Requires Token | Requires Admin |
|--------|-----|-------------|----------------|----------------|
| POST | /api/auth/register | register a new user | - | - |
| POST | /api/auth/login | login as existing user | - | - |
| POST | /api/strains | create a new strain | X | - |
| GET | /api/strains | gets all strains and their info | X | - |
| GET | /api/strains/:id | gets a specific strain by id | X | - |
| PUT | /api/strains/:id | edit a strain | X | X |
| DELETE | /api/strains/:id | delete a strain from database | X | X |

## **Table Requirements**

## **Users**

| Name | Type | Required | Unique | Notes |
|------|------|----------|--------|-------|
| id | integer | yes | yes | auto generated by the API |
| username | string | yes | yes | - |
| password | string | yes | no | - |
| role | boolean | no | no | 0 or 1 is the same as false and true, you can use either

Note: you must be registered and logged in to access the strains list/database

# **Strains**

| Name | Type | Required | Unique | Notes |
|------|------|----------|--------|-------|
| id | integer | yes | yes | auto generated by the API |
| strain_name | string | yes | no | - |
| type | string | yes | no | could be either Hybrid, Sativa or Indica |
| thc_content | string | no | no | usually a percentage |
| cbd_content | string | no | no | - |
| symptoms | text | no | no | - |
| effects | text | no | no | - |
| description | text | no | no | if you want to add more information about this strain |

## **Logins**

If i need to update the database at any point during the week all users made up until that point will be deleted. These logins will always be available to use.
| username | password |
| ----- | -------- |
| user | password |
| admin | password |

## **Requests and Returns**

### POST /api/auth/register
Request body:
```
{
    "username":"bea",
    "password":"password",
    "role": 0
}
```
Returns:
```
{
    "message": "user successfulled registered",
    "data": {
        "id": 4,
        "username": "bea",
        "password": "$2a$08$9BPGvk/6XQMRjKxed.B3tOIZsiLLkAdbBNbMAC8M61.EebIV.RQF2",
        "role": 0
    },
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImJlYSIsInJvbGUiOjAsInN1YmplY3QiOjQsImlhdCI6MTYwMDY2MDA5MSwiZXhwIjoxNjAwNjg4ODkxfQ.2M72kjDnqbXDwpKjfhdo3726zTQemDXht2SCL_l6RcM"
}
```

### POST /api/auth/login
Request body:
```
{
    "username":"user",
    "password":"password"
}
```
Returns:
```
{
    "message": "Welcome!",
    "user": {
        "id": 2,
        "username": "user",
        "password": "$2a$04$Ks3ueUHeiMI8Gi3N6uIvpuQddV9J9MGzLL0gtbU1Vwkbcy5z30UZS",
        "role": 0
    },
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InVzZXIiLCJyb2xlIjowLCJzdWJqZWN0IjoyLCJpYXQiOjE2MDA2OTI3NzEsImV4cCI6MTYwMDcyMTU3MX0.t33fLygVQ8Qo1SvmrcxVe77HXfxfw3fosNKLn9rVy0Y"
}
```

### POST /api/strains
Request body:
```
{
    "strain_name": "testing123 ",
    "type": "Choose one: Hybrid, Sativa or Indica required",
    "thc_content": "1% required",
    "cbd_content": "1%",
    "best_time_for_use": "Choose one: Morning, Afternoon, Night required",
    "more_info": ""
}
```
Returns:
```
{"message": "strain successfully created",
    "rez": {
        "id": 11,
        "strain_name": "testing123 ",
        "type": "Choose one: Hybrid, Sativa or Indica required",
        "thc_content": "1% required",
        "cbd_content": "1%",
        "best_time_for_use": "Choose one: Morning, Afternoon, Night required",
        "more_info": ""
    }
}
```

### GET /api/strains/
Returns:
```
{
    "strains": [
        {
            "id": 1,
            "strain_name": "$100 OG Kush",
            "type": "Hybrid",
            "thc_content": "25%",
            "cbd_content": "",
            "symptoms": "anxiety, chronic pain, insomnia, muscle spasms, tremors",
            "effects": "relaxation, boost in appetite",
            "description": "The relaxing euphoria easing their mind and either alleviating their anxiety or helping lull them into a relaxed sleep. Those suffering chronic pain can also find relief when using $100 OG Kush."
        },
        {
            "id": 2,
            "strain_name": "3D CBD",
            "type": "Sativa",
            "thc_content": "8%",
            "cbd_content": "18%",
            "symptoms": "insomina, migranes, arthritis",
            "effects": "Calm, Mellow",
            "description": "3D CBD is a medicinal strain with mellow THC effects. The high starts off with a relaxing lift of the spirits providing the feeling of happiness and mellowed out, just kicking back and enjoying the atmosphere around you."
        },
        {
            "id": 3,
            "strain_name": "Fruity Pebbles",
            "type": "Indica",
            "thc_content": "23%",
            "cbd_content": "19%",
            "symptoms": "",
            "effects": "",
            "description": "Most cannabis strains sold under the label Fruity Pebbles provides a hybrid-type high that takes hold quickly, with a soft but strong body buzz that can provide relaxation and some psychedelic effects. In general, these strains may be effective medication for pain, mood disorders, migraines, and attention deficit disorders."
        },
        {
            "id": 4,
            "strain_name": "A-Train",
            "type": "Hybrid",
            "thc_content": "20%",
            "cbd_content": "",
            "symptoms": "depression, loss of apetite, anxiety",
            "effects": "",
            "description": ""
        },
        {
            "id": 5,
            "strain_name": "Zelly's Gift",
            "type": "Sativa",
            "thc_content": "18%",
            "cbd_content": "",
            "symptoms": "anxiety, depression, stress",
            "effects": "",
            "description": "Depending on how you look at it, Zelly’s Gift could be offering up a variety of presents to your life including great flavors, happiness, creativity, or relief from mental woes. We don’t want to say she’s perfect, but she nearly is. Enjoy this strain before you head into the office for the day or share some with friends before you head out for a fun weekend adventure."
        }
    ]
}
```

### GET /api/strains/:id
Returns:
```
{
    "id": 1,
    "strain_name": "$100 OG Kush",
    "type": "Hybrid",
    "thc_content": "25%",
    "cbd_content": "",
    "symptoms": "anxiety, chronic pain, insomnia, muscle spasms, tremors",
    "effects": "relaxation, boost in appetite",
    "description": "The relaxing euphoria easing their mind and either alleviating their anxiety or helping lull them into a relaxed sleep. Those suffering chronic pain can also find relief when using $100 OG Kush."
}
```

### PUT /api/strains/:id
Request body:
```
{
    "id": 1,
    "strain_name": "$100 OG Kush",
    "type": "Hybrid",
    "thc_content": "25%",
    "cbd_content": "",
    "symptoms": "anxiety, chronic pain, insomnia, muscle spasms, tremors",
    "effects": "relaxation, boost in appetite",
    "description": ""
}
```
Returns:
```
{
    "message": "strain successfully updated",
    "rez": {
        "id": 1,
        "strain_name": "$100 OG Kush",
        "type": "Hybrid",
        "thc_content": "25%",
        "cbd_content": "",
        "symptoms": "anxiety, chronic pain, insomnia, muscle spasms, tremors",
        "effects": "relaxation, boost in appetite",
        "description": ""
    }
}
```

### DELETE /api/strains/:id
Returns:
```
{
    "message": "this strain was successfully deleted",
    "rez": {
        "id": 1,
        "strain_name": "$100 OG Kush",
        "type": "Hybrid",
        "thc_content": "25%",
        "cbd_content": "",
        "symptoms": "anxiety, chronic pain, insomnia, muscle spasms, tremors",
        "effects": "relaxation, boost in appetite",
        "description": "The relaxing euphoria easing their mind and either alleviating their anxiety or helping lull them into a relaxed sleep. Those suffering chronic pain can also find relief when using $100 OG Kush."
    }
}
```